<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment Performance Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary: #1a1d23;
            --secondary: #2a2f38;
            --accent: #00d4aa;
            --accent-hover: #00b894;
            --danger: #ff4757;
            --warning: #ffa502;
            --text-primary: #ffffff;
            --text-secondary: #a0a6b1;
            --border: #363b47;
            --surface: #252930;
            --surface-hover: #2f3541;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--primary);
            color: var(--text-primary);
            line-height: 1.6;
            font-weight: 400;
        }

        .main-container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            background: var(--secondary);
            border-right: 1px solid var(--border);
            padding: 0;
            width: 280px;
            flex-shrink: 0;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 32px 24px 24px;
            border-bottom: 1px solid var(--border);
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .logo-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 400;
        }

        .nav-menu {
            padding: 24px 0;
            list-style: none;
        }

        .nav-item {
            margin-bottom: 4px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 24px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            border: none;
            background: none;
            width: 100%;
            cursor: pointer;
        }

        .nav-link:hover {
            background: var(--surface-hover);
            color: var(--text-primary);
        }

        .nav-link.active {
            background: var(--surface);
            color: var(--accent);
            border-right: 2px solid var(--accent);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .content-area {
            flex: 1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .top-bar {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 16px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .page-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .export-controls {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 8px 16px;
            border: 1px solid var(--border);
            background: var(--surface);
            color: var(--text-primary);
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .btn:hover {
            background: var(--surface-hover);
            border-color: var(--accent);
        }

        .btn-primary {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--primary);
        }

        .btn-primary:hover {
            background: var(--accent-hover);
            border-color: var(--accent-hover);
        }

        .main-content {
            padding: 32px;
            flex: 1;
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(16px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .metric-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
            transition: all 0.2s ease;
        }

        .metric-card:hover {
            border-color: var(--accent);
            background: var(--surface-hover);
        }

        .metric-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .metric-label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .chart-wrapper {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .chart-container {
            text-align: center;
        }

        .chart-container iframe {
            border-radius: 6px;
            max-width: 100%;
            border: none;
            width: 100%;
            min-height: 400px;
        }

        .calculator-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 32px;
            margin-bottom: 24px;
        }

        .calculator-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 24px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-label {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .input-field {
            background: var(--primary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(0, 212, 170, 0.1);
        }

        .input-field::placeholder {
            color: var(--text-secondary);
        }

        .calculate-btn {
            background: var(--accent);
            border: none;
            border-radius: 6px;
            padding: 12px 24px;
            color: var(--primary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .calculate-btn:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
        }

        .result-panel {
            background: var(--primary);
            border: 1px solid var(--accent);
            border-radius: 8px;
            padding: 24px;
            margin-top: 24px;
        }

        .result-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 16px;
        }

        .result-item {
            text-align: center;
            padding: 16px;
            background: var(--surface);
            border-radius: 6px;
            border: 1px solid var(--border);
        }

        .result-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 4px;
        }

        .result-label {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .portfolio-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .breakdown-item {
            background: var(--secondary);
            padding: 12px;
            border-radius: 6px;
            text-align: center;
            font-size: 12px;
            font-weight: 500;
        }

        @media (max-width: 1024px) {
            .main-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                order: 1;
            }
            
            .content-area {
                order: 2;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .chart-container iframe {
                width: 100%;
                height: 300px;
            }
        }

        @media (max-width: 768px) {
            .top-bar {
                padding: 12px 20px;
            }
            
            .export-controls {
                flex-direction: column;
                gap: 8px;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-positive { background: var(--accent); }
        .status-negative { background: var(--danger); }
        .status-neutral { background: var(--warning); }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">InvestTrack</div>
                <div class="logo-subtitle">Portfolio Analytics Suite</div>
            </div>
            
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <button class="nav-link active" onclick="showSection('dashboard')">
                            <span class="nav-icon">📊</span>
                            Dashboard
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" onclick="showSection('compound')">
                            <span class="nav-icon">📈</span>
                            Compound Interest
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" onclick="showSection('retirement')">
                            <span class="nav-icon">🎯</span>
                            Retirement Planning
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" onclick="showSection('portfolio')">
                            <span class="nav-icon">💼</span>
                            Portfolio Analysis
                        </button>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="content-area">
            <header class="top-bar">
                <h1 class="page-title" id="pageTitle">Performance Dashboard</h1>
                <div class="export-controls">
                    <button class="btn" onclick="printReport()">🖨️ Print</button>
                    <button class="btn btn-primary" onclick="generatePDF()">📄 Export PDF</button>
                </div>
            </header>

            <div class="main-content">
                <!-- Dashboard Section -->
                <section id="dashboard" class="page-section active">
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value" id="totalReturn">--</div>
                            <div class="metric-label">Total Return</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="annualizedROI">--</div>
                            <div class="metric-label">Annualized ROI</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="volatility">12.5%</div>
                            <div class="metric-label">Volatility</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">
                                <span class="status-indicator status-positive"></span>Active
                            </div>
                            <div class="metric-label">Portfolio Status</div>
                        </div>
                    </div>

                    <div class="chart-wrapper">
                        <h3 class="chart-title">Investment Performance Chart</h3>
                        <div class="chart-container">
                            <iframe width="100%" height="400" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRMPS_1VP8AoRwKmvsic4jbximolB17nZTgpd4q-nGDfD3uBZb8QxI-e5utOy1OHImfMBT0sx7x_gd8/pubchart?oid=1750708711&format=interactive"></iframe>
                        </div>
                    </div>

                    <div class="calculator-section">
                        <h3 class="calculator-title">Quick ROI Calculator</h3>
                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Initial Investment</label>
                                <input type="number" class="input-field" id="quickInitial" placeholder="10,000">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Current Value</label>
                                <input type="number" class="input-field" id="quickCurrent" placeholder="12,000">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Time Period (months)</label>
                                <input type="number" class="input-field" id="quickTime" placeholder="12">
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateQuickROI()">Calculate ROI</button>
                        <div id="quickResult"></div>
                    </div>
                </section>

                <!-- Compound Interest Section -->
                <section id="compound" class="page-section">
                    <div class="calculator-section">
                        <h3 class="calculator-title">Compound Interest Calculator</h3>
                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Initial Capital</label>
                                <input type="number" class="input-field" id="principal" placeholder="10,000">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Monthly Contribution</label>
                                <input type="number" class="input-field" id="monthly" placeholder="500">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Annual Interest Rate (%)</label>
                                <input type="number" class="input-field" id="rate" placeholder="8" step="0.1">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Investment Years</label>
                                <input type="number" class="input-field" id="years" placeholder="10">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Compounding Frequency</label>
                                <select class="input-field" id="frequency">
                                    <option value="12">Monthly</option>
                                    <option value="4">Quarterly</option>
                                    <option value="2">Semi-Annual</option>
                                    <option value="1">Annual</option>
                                </select>
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateCompound()">Calculate Growth</button>
                        <div id="compoundResult"></div>
                    </div>
                </section>

                <!-- Retirement Planning Section -->
                <section id="retirement" class="page-section">
                    <div class="calculator-section">
                        <h3 class="calculator-title">Retirement Planning Calculator</h3>
                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Current Age</label>
                                <input type="number" class="input-field" id="currentAge" placeholder="30">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Retirement Age</label>
                                <input type="number" class="input-field" id="retirementAge" placeholder="65">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Current Savings</label>
                                <input type="number" class="input-field" id="currentSavings" placeholder="50,000">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Monthly Contribution</label>
                                <input type="number" class="input-field" id="monthlyContribution" placeholder="1,000">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Expected Return (%)</label>
                                <input type="number" class="input-field" id="expectedReturn" placeholder="7" step="0.1">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Annual Inflation (%)</label>
                                <input type="number" class="input-field" id="inflation" placeholder="3" step="0.1">
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculateRetirement()">Plan Retirement</button>
                        <div id="retirementResult"></div>
                    </div>
                </section>

                <!-- Portfolio Analysis Section -->
                <section id="portfolio" class="page-section">
                    <div class="calculator-section">
                        <h3 class="calculator-title">Portfolio Analysis</h3>
                        <div class="form-grid">
                            <div class="input-group">
                                <label class="input-label">Stocks Investment</label>
                                <input type="number" class="input-field" id="stocks" placeholder="40,000">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Bonds Investment</label>
                                <input type="number" class="input-field" id="bonds" placeholder="30,000">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Crypto Investment</label>
                                <input type="number" class="input-field" id="crypto" placeholder="20,000">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Cash Holdings</label>
                                <input type="number" class="input-field" id="cash" placeholder="10,000">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Stocks Return (%)</label>
                                <input type="number" class="input-field" id="stockReturn" placeholder="10" step="0.1">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Bonds Return (%)</label>
                                <input type="number" class="input-field" id="bondReturn" placeholder="4" step="0.1">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Crypto Return (%)</label>
                                <input type="number" class="input-field" id="cryptoReturn" placeholder="25" step="0.1">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Cash Return (%)</label>
                                <input type="number" class="input-field" id="cashReturn" placeholder="1" step="0.1">
                            </div>
                        </div>
                        <button class="calculate-btn" onclick="calculatePortfolio()">Analyze Portfolio</button>
                        <div id="portfolioResult"></div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
        const pageTitles = {
            'dashboard': 'Performance Dashboard',
            'compound': 'Compound Interest Calculator',
            'retirement': 'Retirement Planning',
            'portfolio': 'Portfolio Analysis'
        };

        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to clicked nav link
            event.target.classList.add('active');
            
            // Update page title
            document.getElementById('pageTitle').textContent = pageTitles[sectionId];
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function formatPercentage(value) {
            return (value * 100).toFixed(2) + '%';
        }

        function createResultPanel(title, items) {
            const resultGrid = items.map(item => `
                <div class="result-item">
                    <div class="result-value">${item.value}</div>
                    <div class="result-label">${item.label}</div>
                </div>
            `).join('');

            return `
                <div class="result-panel">
                    <div class="result-title">${title}</div>
                    <div class="result-grid">
                        ${resultGrid}
                    </div>
                </div>
            `;
        }

        function calculateQuickROI() {
            const initial = parseFloat(document.getElementById('quickInitial').value) || 0;
            const current = parseFloat(document.getElementById('quickCurrent').value) || 0;
            const time = parseFloat(document.getElementById('quickTime').value) || 0;

            if (initial === 0 || time === 0) return;

            const totalReturn = ((current - initial) / initial);
            const annualizedReturn = Math.pow((current / initial), (12 / time)) - 1;
            const gainLoss = current - initial;

            const resultItems = [
                { value: formatPercentage(totalReturn), label: 'Total Return' },
                { value: formatPercentage(annualizedReturn), label: 'Annualized Return' },
                { value: formatCurrency(gainLoss), label: 'Gain/Loss' },
                { value: formatCurrency(current), label: 'Current Value' }
            ];

            document.getElementById('quickResult').innerHTML = createResultPanel('ROI Analysis Results', resultItems);

            // Update dashboard metrics
            document.getElementById('totalReturn').textContent = formatPercentage(totalReturn);
            document.getElementById('annualizedROI').textContent = formatPercentage(annualizedReturn);
        }

        function calculateCompound() {
            const principal = parseFloat(document.getElementById('principal').value) || 0;
            const monthly = parseFloat(document.getElementById('monthly').value) || 0;
            const rate = parseFloat(document.getElementById('rate').value) / 100 || 0;
            const years = parseFloat(document.getElementById('years').value) || 0;
            const frequency = parseFloat(document.getElementById('frequency').value) || 12;

            const periodicRate = rate / frequency;
            const totalPeriods = years * frequency;
            const monthlyPeriods = years * 12;

            const futureValuePrincipal = principal * Math.pow((1 + periodicRate), totalPeriods);
            const monthlyRate = rate / 12;
            const futureValueAnnuity = monthly * (Math.pow(1 + monthlyRate, monthlyPeriods) - 1) / monthlyRate;

            const totalFutureValue = futureValuePrincipal + futureValueAnnuity;
            const totalContributions = principal + (monthly * monthlyPeriods);
            const totalEarnings = totalFutureValue - totalContributions;

            const resultItems = [
                { value: formatCurrency(totalFutureValue), label: 'Final Value' },
                { value: formatCurrency(totalContributions), label: 'Total Contributed' },
                { value: formatCurrency(totalEarnings), label: 'Interest Earnings' },
                { value: formatPercentage(totalEarnings / totalContributions), label: 'Total ROI' }
            ];

            document.getElementById('compoundResult').innerHTML = createResultPanel('Compound Growth Projection', resultItems);
        }

        function calculateRetirement() {
            const currentAge = parseFloat(document.getElementById('currentAge').value) || 0;
            const retirementAge = parseFloat(document.getElementById('retirementAge').value) || 0;
            const currentSavings = parseFloat(document.getElementById('currentSavings').value) || 0;
            const monthlyContribution = parseFloat(document.getElementById('monthlyContribution').value) || 0;
            const expectedReturn = parseFloat(document.getElementById('expectedReturn').value) / 100 || 0;

            const yearsToRetirement = retirementAge - currentAge;
            const monthsToRetirement = yearsToRetirement * 12;
            const monthlyRate = expectedReturn / 12;

            const futureCurrentSavings = currentSavings * Math.pow(1 + expectedReturn, yearsToRetirement);
            const futureContributions = monthlyContribution * (Math.pow(1 + monthlyRate, monthsToRetirement) - 1) / monthlyRate;

            const totalRetirementFund = futureCurrentSavings + futureContributions;
            const totalContributed = currentSavings + (monthlyContribution * monthsToRetirement);
            const retirementIncome = totalRetirementFund * 0.04;

            const resultItems = [
                { value: formatCurrency(totalRetirementFund), label: 'Retirement Fund' },
                { value: formatCurrency(retirementIncome), label: 'Annual Income' },
                { value: formatCurrency(retirementIncome / 12), label: 'Monthly Income' },
                { value: `${yearsToRetirement} years`, label: 'Time to Retirement' }
            ];

            document.getElementById('retirementResult').innerHTML = createResultPanel('Retirement Plan Summary', resultItems);
        }

        function calculatePortfolio() {
            const stocks = parseFloat(document.getElementById('stocks').value) || 0;
            const bonds = parseFloat(document.getElementById('bonds').value) || 0;
            const crypto = parseFloat(document.getElementById('crypto').value) || 0;
            const cash = parseFloat(document.getElementById('cash').value) || 0;

            const stockReturn = parseFloat(document.getElementById('stockReturn').value) / 100 || 0;
            const bondReturn = parseFloat(document.getElementById('bondReturn').value) / 100 || 0;
            const cryptoReturn = parseFloat(document.getElementById('cryptoReturn').value) / 100 || 0;
            const cashReturn = parseFloat(document.getElementById('cashReturn').value) / 100 || 0;

            const totalPortfolio = stocks + bonds + crypto + cash;

            const stockWeight = stocks / totalPortfolio;
            const bondWeight = bonds / totalPortfolio;
            const cryptoWeight = crypto / totalPortfolio;
            const cashWeight = cash / totalPortfolio;

            const expectedReturn = (stockWeight * stockReturn) + (bondWeight * bondReturn) + 
                                 (cryptoWeight * cryptoReturn) + (cashWeight * cashReturn);

            const annualIncome = totalPortfolio * expectedReturn;

            const resultItems = [
                { value: formatCurrency(totalPortfolio), label: 'Total Value' },
                { value: formatPercentage(expectedReturn), label: 'Expected Return' },
                { value: formatCurrency(annualIncome), label: 'Annual Income' },
                { value: formatCurrency(annualIncome / 12), label: 'Monthly Income' }
            ];

            const breakdown = `
                <div class="portfolio-breakdown">
                    <div class="breakdown-item">Stocks<br><strong>${formatPercentage(stockWeight)}</strong></div>
                    <div class="breakdown-item">Bonds<br><strong>${formatPercentage(bondWeight)}</strong></div>
                    <div class="breakdown-item">Crypto<br><strong>${formatPercentage(cryptoWeight)}</strong></div>
                    <div class="breakdown-item">Cash<br><strong>${formatPercentage(cashWeight)}</strong></div>
                </div>
            `;

            document.getElementById('portfolioResult').innerHTML = createResultPanel('Portfolio Analysis', resultItems) + breakdown;
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            doc.setFontSize(20);
            doc.text('Investment Performance Report', 20, 30);

            doc.setFontSize(12);
            doc.text(`Generated: ${new Date().toLocaleDateString()}`, 20, 45);

            let yPos = 60;
            const activeSection = document.querySelector('.page-section.active');
            const sectionTitle = document.getElementById('pageTitle').textContent;

            doc.setFontSize(16);
            doc.text(sectionTitle, 20, yPos);
            yPos += 20;

            // Add basic report content
            doc.setFontSize(10);
            doc.text('This report contains investment analysis and projections.', 20, yPos);
            doc.text('All calculations are based on user inputs and historical data.', 20, yPos + 10);

            doc.save('investment-report.pdf');
        }

        function printReport() {
            window.print();
        }
    </script>
</body>
</html>
